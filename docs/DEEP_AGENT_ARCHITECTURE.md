# ğŸ—ï¸ Deep Agent æ¶æ„è¯´æ˜

## ğŸ“Š æ¶æ„æ¦‚è§ˆ

æ‚¨çš„é¡¹ç›®é‡‡ç”¨ **Agent-Native** æ¶æ„æ¨¡å¼ï¼ŒAI Agent æ˜¯æ ¸å¿ƒæ‰§è¡Œè€…ï¼Œè€Œä¸æ˜¯ç®€å•çš„ API è·¯ç”±å±‚ã€‚

---

## ğŸ¯ æ ¸å¿ƒç†å¿µ

### ä»"è°ƒç”¨ LLM"åˆ°"Agent åŸä½"

**ä¼ ç»Ÿæ¨¡å¼**ï¼š
```
ç”¨æˆ· â†’ å‰ç«¯ â†’ API â†’ ä¸šåŠ¡é€»è¾‘ â†’ è°ƒç”¨ LLM â†’ è¿”å›ç»“æœ
```

**Agent-Native æ¨¡å¼**ï¼š
```
ç”¨æˆ· â†’ å‰ç«¯ â†’ Deep Orchestrator â†’ Agent è‡ªä¸»å†³ç­–
                                            â†“
                                    å­ Agent åè°ƒ
                                    â†“
                              ç»„åˆåŸå­å·¥å…·å®Œæˆä»»åŠ¡
```

---

## ğŸ—ï¸ åˆ†å±‚æ¶æ„

### 1. **ç¼–æ’å±‚ (Orchestration Layer)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Deep Orchestrator           â”‚  â† ä¸»ç¼–æ’å™¨
â”‚  (Deep Orchestrator)          â”‚
â”‚                                 â”‚
â”‚  èŒè´£:                        â”‚
â”‚  - å·¥ä½œåŒºç®¡ç†                  â”‚
â”‚  - çŠ¶æ€æœºè°ƒåº¦                  â”‚
â”‚  - Agent åè°ƒ                  â”‚
â”‚  - å¤±è´¥é‡è¯•                    â”‚
â”‚  - Fallback æœºåˆ¶               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“ è°ƒåº¦
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                   â”‚
    â†“                   â†“
```

**æ–‡ä»¶ä½ç½®**ï¼š
```
backend/app/application/orchestration/
â”œâ”€â”€ deep_orchestrator.py     â† ä¸»ç¼–æ’å™¨
â””â”€â”€ backends.py              â† Provider å·¥å‚
```

---

### 2. **å­ Agent å±‚ (Sub-Agent Layer)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            5 å¤§å­ Agent                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚Product   â”‚  â”‚Copywrite  â”‚  â”‚Image â”‚â”‚
â”‚  â”‚Analysis  â”‚  â”‚Agent      â”‚  â”‚Agent  â”‚â”‚
â”‚  â”‚Agent     â”‚  â”‚            â”‚  â”‚      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚       â†“             â†“          â†“      â†“  â”‚
â”‚  åˆ†æäº§å“      ç”Ÿæˆæ–‡æ¡ˆ    ç”Ÿæˆå›¾ç‰‡   â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ Video     â”‚                      â”‚
â”‚  â”‚Generationâ”‚                      â”‚
â”‚  â”‚Agent     â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚       â†“                             â”‚
â”‚   ç”Ÿæˆè§†é¢‘                          â”‚
â”‚                                       â†“
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚  QA       â”‚                      â”‚
â”‚  â”‚Sub-Agent â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚       â†“                             â”‚
â”‚   è´¨é‡å®¡æ ¸                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ–‡ä»¶ä½ç½®**ï¼š
```
backend/app/application/agents/
â”œâ”€â”€ product_analysis_agent.py    â† äº§å“åˆ†æ Agent
â”œâ”€â”€ copywriting_agent.py         â† æ–‡æ¡ˆç”Ÿæˆ Agentï¼ˆLangGraphï¼‰
â”œâ”€â”€ image_agent.py              â† å›¾åƒç”Ÿæˆ Agentï¼ˆLangGraphï¼‰
â”œâ”€â”€ video_generation_agent.py  â† è§†é¢‘ç”Ÿæˆ Agent
â””â”€â”€ qa_agent.py                 â† QA å®¡æ‰¹ Agent
```

---

### 3. **å·¥å…·å±‚ (Tools Layer)**

Agent é€šè¿‡**åŸå­å·¥å…·**å®Œæˆä»»åŠ¡ï¼Œè€Œéå¤æ‚ä¸šåŠ¡é€»è¾‘ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Atomic Tools               â”‚  â† åŸå­å·¥å…·
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚FileSystemâ”‚ Text    â”‚Vision   â”‚â”‚
â”‚  â”‚Tools     â”‚Tools    â”‚Tools    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚           â†“         â†“        â†“      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ImageTools â”‚VideoToolsâ”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚      â†“            â†“            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ StorageTools            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚      â†“                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ–‡ä»¶ä½ç½®**ï¼š
```
backend/app/application/tools/
â”œâ”€â”€ filesystem_tools.py    â† æ–‡ä»¶ç³»ç»Ÿæ“ä½œ
â”œâ”€â”€ text_tools.py          â† æ–‡æœ¬ç”Ÿæˆ
â”œâ”€â”€ vision_tools.py        â† å›¾åƒåˆ†æ
â”œâ”€â”€ image_tools.py         â† å›¾åƒç”Ÿæˆ
â”œâ”€â”€ video_tools.py         â† è§†é¢‘ç”Ÿæˆ
â””â”€â”€ storage_tools.py       â† å­˜å‚¨/Meta æ“ä½œ
```

---

### 4. **çŠ¶æ€æœºå±‚ (State Machine Layer)**

å¤æ‚çš„çŠ¶æ€æµè½¬ï¼Œæ”¯æŒï¼š

```
pending â†’ init â†’ running â†’ analysis â†’ copywriting â†’ image_generation
  â†’ video_generation â†’ qa_review â†’ approval_required
    â†’ completed/failed/cancelled
```

**çŠ¶æ€æšä¸¾**ï¼š
```python
class WorkflowStatus(str.Enum):
    pending = "pending"           # åˆå§‹çŠ¶æ€
    init = "init"                 # åˆå§‹åŒ–
    running = "running"           # è¿è¡Œä¸­

    # æ‰§è¡Œé˜¶æ®µ
    analysis = "analysis"           # äº§å“åˆ†æ
    copywriting = "copywriting"     # æ–‡æ¡ˆç”Ÿæˆ
    image_generation = "image_generation"  # å›¾åƒç”Ÿæˆ
    video_generation = "video_generation"  # è§†é¢‘ç”Ÿæˆ
    qa_review = "qa_review"       # QA å®¡æ ¸

    # å®¡æ‰¹é˜¶æ®µ
    approval_required = "approval_required"  # ç­‰å¾…å®¡æ‰¹
    approval = "approval"        # å®¡æ‰¹ä¸­

    # æœ€ç»ˆçŠ¶æ€
    completed = "completed"       # å®Œæˆ
    failed = "failed"            # å¤±è´¥
    cancelled = "cancelled"       # å–æ¶ˆ
```

---

### 5. **å·¥ä½œåŒºå±‚ (Workspace Layer)**

å…±äº«æ–‡ä»¶ç³»ç»Ÿå·¥ä½œåŒºï¼Œæ¯ä¸ªå·¥ä½œæµä¸€ä¸ªç‹¬ç«‹ç›®å½•ã€‚

```
backend/projects/{workflow_id}/
â”œâ”€â”€ input/                    â† è¾“å…¥æ–‡ä»¶
â”‚   â”œâ”€â”€ image_source.json      â† äº§å“å›¾ç‰‡
â”‚   â””â”€â”€ context.txt          â† ä¸Šä¸‹æ–‡
â”‚
â”œâ”€â”€ workspace/                â† å·¥ä½œåŒº
â”‚   â”œâ”€â”€ context.md           â† Agent ä¸Šä¸‹æ–‡è®°å¿†
â”‚   â”œâ”€â”€ campaign_plan.md     â† è¥é”€è®¡åˆ’
â”‚   â”œâ”€â”€ analysis_report.md    â† åˆ†ææŠ¥å‘Š
â”‚   â”œâ”€â”€ qa_report.md         â† QA æŠ¥å‘Š
â”‚   â””â”€â”€ reflection.md        â† Agent æ€è€ƒ
â”‚
â”œâ”€â”€ artifacts/                â† äº§å‡ºç‰©
â”‚   â”œâ”€â”€ copy/               â† æ–‡æ¡ˆäº§ç‰©
â”‚   â”‚   â”œâ”€â”€ product_page_v1.md
â”‚   â”‚   â”œâ”€â”€ social_post_v1.md
â”‚   â”‚   â””â”€â”€ ad_short_v1.md
â”‚   â”œâ”€â”€ images/             â† å›¾åƒäº§ç‰©
â”‚   â”‚   â”œâ”€â”€ hero.png
â”‚   â”‚   â”œâ”€â”€ lifestyle.png
â”‚   â”‚   â””â”€â”€ detail.png
â”‚   â””â”€â”€ video/              â† è§†é¢‘äº§ç‰©
â”‚       â”œâ”€â”€ ad.mp4
â”‚       â””â”€â”€ fallback.mp4
â”‚
â””â”€â”€ logs/                    â† æ‰§è¡Œæ—¥å¿—
    â””â”€â”€ execution.json       â† ç»“æ„åŒ–æ—¥å¿—
```

---

### 6. **é€šä¿¡å±‚ (Communication Layer)**

å®æ—¶ WebSocket äº‹ä»¶ï¼Œå‰ç«¯å¯ç›‘å¬è¿›åº¦ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Socket Manager           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  äº‹ä»¶ç±»å‹:                    â”‚
â”‚  - agent:thought         â† Agent æ€è€ƒ
â”‚  - agent:tool_call       â† å·¥å…·è°ƒç”¨
â”‚  - agent:progress         â† è¿›åº¦æ›´æ–°
â”‚  - agent:artifact         â† äº§å‡ºç‰©
â”‚  - agent:result           â† æœ€ç»ˆç»“æœ
â”‚  - agent:error            â† é”™è¯¯ä¿¡æ¯
â”‚  - agent:approval_required â† å®¡æ‰¹è¯·æ±‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    å‰ç«¯å®æ—¶ç›‘å¬
```

**æ–‡ä»¶ä½ç½®**ï¼š
```
backend/app/interface/ws/socket_manager.py
```

---

### 7. **æ•°æ®å±‚ (Data Layer)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      PostgreSQL Database      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  video_assets è¡¨            â† è§†é¢‘/å›¾ç‰‡èµ„äº§
â”‚  product_packages è¡¨        â† äº§å“åŒ…ä¸»è®°å½•
â”‚  users è¡¨                  â† ç”¨æˆ·æ•°æ®
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AsyncSession (SQLAlchemy)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ æ‰§è¡Œæµç¨‹

### äº§å“åŒ…ç”Ÿæˆå®Œæ•´æµç¨‹

```
1. POST /api/v1/product-packages/generate
   â†“
2. Deep Orchestrator.run()
   â†“
3. åˆ›å»ºå·¥ä½œåŒº (workspace)
   â†“
4. ProductAnalysisAgent (åˆ†æäº§å“å›¾ç‰‡)
   â†“ emit agent:progress
5. CopywritingAgent (ç”Ÿæˆæ–‡æ¡ˆ)
   â”œâ”€ LangGraph: plan â†’ draft â†’ critique â†’ finalize
   â†“ emit agent:thought
6. ImageAgent (ç”Ÿæˆäº§å“å›¾)
   â”œâ”€ ä¼˜åŒ–æç¤ºè¯ â†’ ç”Ÿæˆå›¾ç‰‡
   â†“ emit agent:artifact
7. VideoGenerationAgent (ç”Ÿæˆå¹¿å‘Šè§†é¢‘)
   â”œâ”€ å°è¯•è§†é¢‘ç”Ÿæˆ
   â”‚ å¤±è´¥ â†’ fallback: å›¾ç‰‡å¹»ç¯ç‰‡
   â†“ emit agent:artifact
8. QASubAgent (è´¨é‡å®¡æ ¸)
   â†“ emit agent:approval_required
9. ç­‰å¾…å®¡æ‰¹ (æˆ–è‡ªåŠ¨é€šè¿‡)
   â†“
10. å®Œæˆï¼Œèšåˆç»“æœ
```

---

## ğŸ¨ LangGraph å·¥ä½œæµ

### CopywritingAgent (æ–‡æ¡ˆç”Ÿæˆï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     LangGraph å·¥ä½œæµ         â”‚
â”‚  StateGraph(4 nodes)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚  [Plan] â†’ [Draft]           â”‚
â”‚    â†“        â†“               â”‚
â”‚  [Critique] â†’ [Finalize]    â”‚
â”‚     â†“        â†“              â”‚
â”‚    [END]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ¯ä¸ªèŠ‚ç‚¹**ï¼š
- æ¥æ”¶ `GraphState`
- æ‰§è¡Œä¸šåŠ¡é€»è¾‘
- æ›´æ–°çŠ¶æ€
- å‘é€ WebSocket äº‹ä»¶

### ImageAgent (å›¾åƒç”Ÿæˆ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     LangGraph å·¥ä½œæµ         â”‚
â”‚  StateGraph(3 nodes)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â”‚
â”‚  [Optimize Prompt]            â”‚
â”‚    â†“                        â”‚
â”‚  [Generate Image]             â”‚
â”‚    â†“                        â”‚
â”‚  [Persist Asset]              â”‚
â”‚    â†“                        â”‚
â”‚    [END]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¡ Provider æ¶æ„

ç»Ÿä¸€çš„ Provider å·¥å‚æ¨¡å¼ï¼š

```python
# backend/app/core/factory.py

class ProviderFactory:
    _registry = {
        "deepseek": DeepSeekGenerator,      # æ–‡æœ¬ç”Ÿæˆ
        "mcp_image": MCPImageGenerator,   # å›¾åƒç”Ÿæˆ
        "mock_image": MockImageGenerator,  # Mock ç”Ÿæˆ
    }
```

**å¥½å¤„**ï¼š
- ç»Ÿä¸€æ¥å£
- æ˜“äºåˆ‡æ¢ Provider
- æ”¯æŒ Mock æµ‹è¯•

---

## ğŸ” å…³é”®ç‰¹æ€§

### 1. å¼‚æ­¥ä¼˜å…ˆ

- å…¨å¼‚æ­¥ I/O
- AsyncSession æ•°æ®åº“æ“ä½œ
- WebSocket å®æ—¶æ¨é€

### 2. å¯è§‚æµ‹æ€§

- **LangSmith è¿½è¸ª** âœ…
- ç»“æ„åŒ–æ—¥å¿— (execution.json)
- WebSocket äº‹ä»¶æµ
- è¿›åº¦ç™¾åˆ†æ¯”è¿½è¸ª

### 3. å®¹é”™æœºåˆ¶

- å¤±è´¥é‡è¯•
- Video Fallback (è§†é¢‘å¤±è´¥â†’å›¾ç‰‡å¹»ç¯ç‰‡)
- çŠ¶æ€å›æ»š

### 4. å®¡æ‰¹å·¥ä½œæµ

- HITL äººå·¥å®¡æ ¸
- å®¡æ‰¹é€šè¿‡/æ‹’ç»
- éƒ¨åˆ†é‡ç”Ÿæˆ

---

## ğŸ“ æ–‡ä»¶ç»“æ„æ€»è§ˆ

```
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ application/
â”‚   â”‚   â”œâ”€â”€ orchestration/         â† ç¼–æ’å±‚
â”‚   â”‚   â”œâ”€â”€ agents/              â† Agent å±‚
â”‚   â”‚   â”œâ”€â”€ tools/              â† å·¥å…·å±‚
â”‚   â”‚   â””â”€â”€ dtos/              â† æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”œâ”€â”€ infrastructure/
â”‚   â”‚   â”œâ”€â”€ database/          â† æ•°æ®åº“å±‚
â”‚   â”‚   â”œâ”€â”€ repositories/       â† ä»“å‚¨å±‚
â”‚   â”‚   â””â”€â”€ mcp/              â† MCP å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ interface/
â”‚   â”‚   â”œâ”€â”€ routes/           â† REST API
â”‚   â”‚   â””â”€â”€ ws/              â† WebSocket
â”‚   â””â”€â”€ core/
â”‚       â”œâ”€â”€ config.py          â† é…ç½®
â”‚       â”œâ”€â”€ factory.py         â† Provider å·¥å‚
â”‚       â””â”€â”€ langchain_init.py  â† LangSmith
â””â”€â”€ projects/              â† å·¥ä½œåŒºï¼ˆåŠ¨æ€åˆ›å»ºï¼‰
```

---

## ğŸš€ æ‰©å±•æ€§

### æ·»åŠ æ–° Agent

```python
# 1. åˆ›å»º Agent æ–‡ä»¶
backend/app/application/agents/new_agent.py

# 2. å®ç°æ ‡å‡†æ¥å£
class NewAgent:
    async def run(self, request, workspace):
        # æ‰§è¡Œé€»è¾‘
        results = await process()

        # ä¿å­˜äº§å‡º
        await save_artifacts(results)

        return results

# 3. æ³¨å†Œåˆ° Orchestrator
```

### æ·»åŠ æ–°å·¥å…·

```python
# 1. åˆ›å»ºå·¥å…·æ–‡ä»¶
backend/app/application/tools/new_tools.py

# 2. å®ç°åŸå­æ“ä½œ
class NewTools:
    async def do_something(self, input_data):
        # ç®€å•ã€åŸå­
        return result

# 3. åœ¨ Agent ä¸­ç»„åˆä½¿ç”¨
```

---

## ğŸ’¡ æ¶æ„ä¼˜åŠ¿

| ç‰¹æ€§ | å¥½å¤„ |
|------|------|
| **çµæ´»æ€§** | Agent è‡ªä¸»å†³ç­–ï¼Œæ— éœ€ä¿®æ”¹ä»£ç  |
| **å¯ç»„åˆæ€§** | å·¥å…·åƒç§¯æœ¨ï¼Œè‡ªç”±ç»„åˆ |
| **å¯è§‚æµ‹æ€§** | å®Œæ•´è¿½è¸ªæ¯ä¸ªæ­¥éª¤ |
| **å®¹é”™æ€§** | å¤šå±‚é”™è¯¯å¤„ç† |
| **å¯æµ‹è¯•æ€§** | åŸå­å·¥å…·æ˜“æµ‹è¯• |
| **å¯æ‰©å±•æ€§** | æ–°å¢ Agent/å·¥å…·æ— éœ€æ”¹æ¶æ„ |

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

è¯¦ç»†æ¶æ„è®¾è®¡è¯·æŸ¥çœ‹ï¼š
- `Agent-Implementation-plan.md` - å®Œæ•´å®æ–½è®¡åˆ’
- `Agent-native.md` - Agent-native æ¶æ„ç†å¿µ
- `backend/app/application/orchestration/` - ç¼–æ’å™¨å®ç°

---

## ğŸ‰ æ€»ç»“

æ‚¨çš„ Deep Agent æ¶æ„æ˜¯ä¸€ä¸ªï¼š

1. **ä»¥ Agent ä¸ºæ ¸å¿ƒ**çš„æ‰§è¡Œæ¨¡å¼
2. **åŸå­å·¥å…·**ä¸ºç§¯æœ¨çš„ç»„åˆæ–¹å¼
3. **LangGraph** å·¥ä½œæµç¼–æ’
4. **å…±äº«å·¥ä½œåŒº**çš„ä¸Šä¸‹æ–‡è®°å¿†
5. **çŠ¶æ€æœº**çš„å¤æ‚æµç¨‹æ§åˆ¶
6. **WebSocket** çš„å®æ—¶é€šä¿¡
7. **LangSmith** çš„å®Œæ•´è¿½è¸ª

**è¿™ç§æ¶æ„è®©æ‚¨çš„ AI ç³»ç»Ÿæ›´æ™ºèƒ½ã€æ›´çµæ´»ã€æ›´å¯ç»´æŠ¤ï¼** ğŸš€
